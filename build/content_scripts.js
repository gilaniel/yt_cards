!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({6:function(e,t,n){"use strict";function a(){$(".b-loader").show()}function i(){$(".b-loader").hide()}function r(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function o(e,t){if(t){var n=s(e);n||(n=[]);var a=function(e){var t,n=e.length,a=[],i={};for(t=0;t<n;t++)i[e[t]]=0;for(t in i)a.push(t);return a}(n.concat(t));localStorage.setItem(e,JSON.stringify(a))}}function s(e){return JSON.parse(localStorage.getItem(e))}function c(e,t){return'<div class="'.concat(t?"error-list-item":"js-list-item",'">').concat(e,"</div>")}n.r(t);/cards/.exec(document.URL)&&function(){var e="",t=[],n=[],l=[],d=[],u=[],m=[],_=0,v={version:"",apiKey:"",ar:""},f={IDS:[],MESSAGES:[],TEASERS:[],COPY_IDS:[],PL_IDS:[]};function p(){a(),$("body").append('<script id="initApp"><\/script>'),chrome.runtime.sendMessage({action:"get_id"},(function(t){!function(t){var n=x(t),a=(new DOMParser).parseFromString(t,"text/html"),i=n.filter((function(e){return e.textContent.indexOf("GUIDED_HELP")>-1}));try{if(i=i[0].textContent.split("var ytInitialGuideData = JSON.parse(")[1].split(");")[0],i=JSON.parse(i),(i=JSON.parse(i)).responseContext.serviceTrackingParams.forEach((function(t){"GUIDED_HELP"===t.service&&(e=t.params[0].value)})),e)return void h(n,e);throw new Error("no channel ID")}catch(e){console.log(e)}e=(i=n.filter((function(e){return e.textContent.indexOf("GUIDED_HELP")>-1})))[0].textContent.indexOf('creator_channel_id","value":"')>-1?/creator_channel_id","value":"([^"]+)"/.exec(i[0].textContent)[1]:(e=$(a).find('.spf-link[title="Мой канал"]').attr("href")||$(a).find('.spf-link[title="My channel"]').attr("href")).split("/channel/")[1];h(n,e)}(t)})),y()}function h(e,t){var n=e.filter((function(e){return e.textContent.indexOf("GAPI_HINT_PARAMS")>-1}));if(void 0===n[0])return alert("Auth token error!"),i(),!1;var a="";n[0].textContent.indexOf('"XSRF_TOKEN"')>-1?a=/XSRF_TOKEN":"([^"]+)"/.exec(n[0].textContent)[1]:(n=e.filter((function(e){return e.textContent.indexOf("GOOGLE_HELP_CONTEXT")>-1})),a=/XSRF_TOKEN': "([^"]+)"/.exec(n[0].textContent)[1]),function(e,t){var n=new Date,a=n.getTime()+33e5;n.setTime(a),document.cookie="tools_auth_token_"+e+"="+t+"; path=/; expires="+n.toGMTString()}(t,a),function(e){chrome.runtime.sendMessage({action:"get_yt_ar",channelId:e},(function(e){var t=x(e).filter((function(e){return e.textContent.indexOf("var ytcfg")>-1}));t[0].textContent.indexOf("SERVER_MILLIS_SINCE_EPOCH")>-1&&(v.ar=/SERVER_MILLIS_SINCE_EPOCH":([^"]+),/.exec(t[0].textContent)[1])}))}(t),function(e){chrome.runtime.sendMessage({action:"get_title",id:e},(function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n="";n=t.getElementsByTagName("title")[1]?t.getElementsByTagName("title")[1].text:t.getElementsByTagName("title")[0].text,$(".channel-title").html(n),i()}))}(t),localStorage.setItem("tools_channel_id",t)}function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";$(".success-text").addClass("hidden"),$(".error-block").addClass("hidden"),a();var r=[];u=[],chrome.runtime.sendMessage({action:"get_new_videos",page:e,params:n,ar:v.ar},(function(a){var o=x(a),s=new DOMParser,c=o.filter((function(e){return e.textContent.indexOf("VIDEO_LIST_DISPLAY_OBJECT")>-1}))[0].textContent.split('VIDEO_LIST_DISPLAY_OBJECT":')[1].split("}]")[0]+"}]";(c=JSON.parse(c)).forEach((function(e){var n=e.id;e=s.parseFromString(e.html,"text/html");var a=$(e).find(".vm-video-title-content").text(),i=$(e).find(".video-time").text().split(":");i&&(i=i.length>2?60*+i[0]*60+60*+i[1]+ +i[2]:60*+i[0]+ +i[1],t.push([n,i,a]))})),c.length<25?e=3:e++,e<=2&&g(e,n),3===e&&((t=t.splice(0,50)).forEach((function(e){var t={playlistVideoRenderer:{videoId:e[0],lengthSeconds:e[1],title:e[2]}};u.push(t),b(e[0],t,r)})),Promise.all(r).then((function(){i(),n?(d=u,$(".js-most-videos-count").removeClass("hide"),$(".js-most-count").text(d.length)):(l=u,$(".js-all-videos-count").removeClass("hide"),$(".js-all-count").text(l.length))})))}))}function b(e,t,n){var a=new Promise((function(n,a){chrome.runtime.sendMessage({action:"check_card",v:e},(function(e){t.cards=[],e.feature_templates&&e.feature_templates.length&&e.feature_templates[0].key&&(t.cards=e.feature_templates),$(".js-videos-count").removeClass("hide"),n(t)}))}));n.push(a)}function S(e){var t=e.video;$(".error-block").removeClass("hidden"),$(".errors-list").append(c("".concat(e.error," ").concat(t.playlistVideoRenderer.title," (").concat(t.playlistVideoRenderer.videoId,")"),"error"))}function x(e){var t=(new DOMParser).parseFromString(e,"text/html");return Array.prototype.slice.call(t.getElementsByTagName("script"))}function k(e){a(),chrome.runtime.sendMessage({action:"check_card",v:e},(function(t){t.feature_templates&&t.feature_templates.length&&t.feature_templates[0].key?(m=t.feature_templates,$(".card-block").each((function(e,t){if(m[e]){var n=m[e].video_id||m[e].playlist_id||m[e].channel_url,a=m[e].custom_message,i=m[e].teaser_text;(t=$(t)).find(".video_item_id").val(n),t.find(".custom_message").val(a),t.find(".teaser_text").val(i)}})),o("COPY_IDS",e),y()):alert("Bad Video Id: "+e),i()}))}function y(){f.IDS=s("IDS")||[],f.MESSAGES=s("MESSAGES")||[],f.TEASERS=s("TEASERS")||[],f.COPY_IDS=s("COPY_IDS")||[],f.PL_IDS=s("PL_IDS")||[],$(".list-content").html("");["IDS","MESSAGES","TEASERS","COPY_IDS","PL_IDS"].forEach((function(e){f[e].forEach((function(t){$(".".concat(e.toLowerCase(),"-list")).append(c(t))}))}))}p(),chrome.extension.onMessage.addListener((function(e,t,n){"check_user"==e.action&&p()})),$(".js-set-card-btn").on("click",(function(t){t.preventDefault();var a=[];if($(".video_item_id").each((function(e,t){t.value&&(t.value.indexOf("/watch?v=")>-1&&(t.value=t.value.split("/watch?v=")[1]),a.push(t.value))})),a.length&&!$(".b-input-error").length){$(".progress-bar").addClass("_show"),$(".progress-bar-fill").css("width","0%"),$(".success-text").addClass("hidden"),$(".error-block").addClass("hidden"),$(".errors-list").html(""),u=n.concat(l).concat(d);for(var i=[],s=[],c=[],m=function(t){u.forEach((function(n,o){var s=function(t,n,a){var i=[],o=[],s=[];$(".custom_message").each((function(e,t){i.push(t.value?t.value:"")})),$(".teaser_text").each((function(e,t){o.push(t.value?t.value:"")})),$(".start_ms").each((function(e,t){s.push(t.value?t.value:"")}));var c=n.playlistVideoRenderer,l={key:"",type:"video",start_ms:3e4,show_warnings:!0,video_item_id:"",video_url:"",custom_message:"",teaser_text:"",session_token:r("tools_auth_token_"+e)},d=12e4;if(c.lengthSeconds<600&&(d=Math.round(c.lengthSeconds/6*1e3),l.start_ms=d),t[a].indexOf("user")>-1||t[a].indexOf("channel")>-1?(delete l.action_create_video,l.action_create_collaborator=1,l.channel_url=t[a],l.type="collaborator"):(delete l.channel_url,delete l.action_create_collaborator,l.action_create_video=1,l.type="video"),l.video_item_id=t[a],l.custom_message=i[a],l.teaser_text=o[a],a>0&&(l.start_ms+=d*a),s[a]){var u=s[a].split(":");u=u.length>2?60*+u[0]*60+60*+u[1]+ +u[2]:60*+u[0]+ +u[1],l.start_ms=1e3*u}return l}(a,n,t);i.push({video:n,params:s})}))},v=0;v<a.length;v++)m(v);u.forEach((function(e,t){e.cards.length&&s.push(e)}));for(var f=function(e){s.forEach((function(t,n,a){t.cards[e]&&c.push({id:t.playlistVideoRenderer.videoId,key:t.cards[e].key})}))},p=0;p<5;p++)f(p);for(var h=[],g=[],b=0;b<Math.ceil(i.length/1);b++)h[b]=i.slice(1*b,1*b+1);for(var x=0;x<Math.ceil(c.length/1);x++)g[x]=c.slice(1*x,1*x+1);var k=function(){_=0,h.reduce((function(e,t,n,a){return e.then((function(){return function(e,t){return new Promise((function(n,a){e.forEach((function(e,i,r){chrome.runtime.sendMessage({action:"set_card",v:e.video.playlistVideoRenderer.videoId,params:e.params},(function(s){o("IDS",e.params.video_item_id),o("MESSAGES",e.params.custom_message),o("TEASERS",e.params.teaser_text),_++,$(".progress-bar span").text("Set cards"),$(".progress-bar-fill").css("width",100*_/t.length+"%");var c=u.find((function(t){return t.playlistVideoRenderer.videoId==e.video.playlistVideoRenderer.videoId}));if(s.error)return S({error:"Set card error:",video:c}),void a(s.videoId);if((s=JSON.parse(s.split('response">')[1].split("</textarea>")[0])).errors){var l="";if("Invalid Request"===s.errors[0])l=s.form_errors[0].message;else for(var d in s.errors)s.errors[d].trim().length&&(l=s.errors[d]);S({error:l+":",video:c})}else delete c.error,c.cards=s.feature_templates;i===r.length-1&&n()}))}))}))}(t,i).then((function(){n===a.length-1&&($(".progress-bar").removeClass("_show"),$(".success-text").removeClass("hidden"),y())}))})).catch((function(e){n===a.length-1&&($(".progress-bar").removeClass("_show"),$(".success-text").removeClass("hidden"))}))}),Promise.resolve())};if(g.length)return _=0,void g.reduce((function(t,n,a,i){return t.then((function(){return function(t,n){return new Promise((function(a,i){t.forEach((function(t,o,s){var c={key:t.key,session_token:r("tools_auth_token_"+e)};chrome.runtime.sendMessage({action:"clear_card",v:t.id,params:c},(function(e){_++,$(".progress-bar span").text("Deleting cards"),$(".progress-bar-fill").css("width",100*_/n.length+"%");var r=u.find((function(e){return e.playlistVideoRenderer.videoId==t.id}));if(e.error)return S({error:"Can't clear card:",video:r}),void i(e.videoId);r.cards=e.feature_templates,o===s.length-1&&a()}))}))}))}(n,c).then((function(){a===i.length-1&&k()}))})).catch((function(e){a===i.length-1&&k()}))}),Promise.resolve());k()}})),$(".list-ico").on("click",(function(e){var t=e.currentTarget.dataset.type,n=$(e.currentTarget);n.toggleClass("open"),f[t].length&&(n.hasClass("open")?($(".list-block").closest("div").removeClass("focus"),n.closest("div").addClass("focus")):($(".list-ico").removeClass("open"),n.closest("div").removeClass("focus")))})),$(".js-get-last").on("click",(function(){t=[],g(1)})),$(".js-get-list").on("click",(function(){var e=$(".js-pl-id").val();e&&function(e){$(".success-text").addClass("hidden"),a(),u=[],chrome.runtime.sendMessage({action:"get_pl_videos",plId:e},(function(t){try{var a=x(t).filter((function(e){return e.textContent.indexOf("responseContext")>-1}))[0].textContent.split('window["ytInitialData"] = ')[1].split("};");n=JSON.parse(a[0]+"}").contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents[0].itemSectionRenderer.contents[0].playlistVideoListRenderer.contents;var r=[];n.forEach((function(e){var t=e.playlistVideoRenderer;!l.find((function(e){return e.playlistVideoRenderer.videoId==t.videoId}))&&t.lengthSeconds&&u.push(e)})),u.forEach((function(e){b(e.playlistVideoRenderer.videoId,e,r)})),n=u,Promise.all(r).then((function(t){i(),$(".js-pl-videos-count").removeClass("hide"),$(".js-playlist-count").text(n.length),o("PL_IDS",e),y()}))}catch(e){i(),alert("Wrong Playlist or something else. Please contact Gila.")}}))}(e)})),$(".js-get-most-viewed").on("click",(function(){t=[],g(1,"&vmo=viewed&sa=0&sf=viewcount")})),$(".js-copy-cards").on("click",(function(){var e=$(".js-video-id").val();e&&k(e)})),$(".js-refresh-btn").on("click",(function(){t=[],n=[],l=[],d=[],u=[],$(".b-input-x").val(""),$(".js-video-count").addClass("hide"),$(".error-block").addClass("hidden"),$(".success-text").addClass("hidden"),$(".errors-list").html("")}))}(),function(){var e,t,n,a,i,r=/call_to_action/.exec(document.URL),o=/annotations/.exec(document.URL),s=r||o,c={},l=!0;if(r?$((function(){$("body").on("click",".js-get-tmp-btn",(function(){var n=$(".js-auth-token").val(),a=$(".js-ending-tmp").val(),i=[];if($(".js-check-video").each((function(e,t){!0===(t=$(t)).prop("checked")&&i.push({id:t.val()})})),!a)return!1;$(".js-template").val(""),localStorage.removeItem("template"),g();$(".js-tab-item.current").data("tab").split(",")[1];chrome.runtime.sendMessage({action:"get_tmp_calls",token:n,id:a},(function(n){if("error"===n.description)0===n.error.status?h("You are not authorized"):400===n.error.status&&h("Something wrong!"),b();else{(new DOMParser).parseFromString(n,"text/html");if(!$(n.documentElement).find('annotation[type="promotion"] data').length)return b(),h("No image on this video!"),!1;var a=JSON.parse($(n.documentElement).find('annotation[type="promotion"] data')[0].innerHTML).image_url.split("/");if(e=a[a.length-1].split(".")[0],(t=JSON.parse($(n.documentElement).find('annotation[type="branding"] data')[0].innerHTML).channel_id)!=localStorage.getItem("call_ch_id"))return h("Use the correct account!"),$(".js-check-all").prop("checked",!1),b(),!1;b()}}))})),$("body").on("click",".js-revert-all-btn",(function(){var e=[];if($(".js-check-video").each((function(t,n){!0===(n=$(n)).prop("checked")&&e.push({id:n.val()})})),!e.length)return!1;g();var n=S("call_auth_token_"+t);n||checkUser();$(".js-tab-item.current").data("tab").split(",")[1];$.each(e,(function(e,a){var i=JSON.parse(localStorage.getItem("template"));for(var r in i.push({name:"video_id",value:a.id}),i.push({name:"session_token",value:n}),i)"cta_display_url"!=i[r].name&&"cta_destination_url"!=i[r].name&&"cta_text1"!=i[r].name||(i[r].value="");chrome.runtime.sendMessage({action:"revert_calls",data:i},(function(e){e.error?($('.b-list-item[data-id="'+a.id+'"]').addClass("err"),$('.b-list-item[data-id="'+a.id+'"] input').prop("checked",!1),$(".js-check-all").prop("checked",!1),b()):$.get("/admin/call_to_action?action=annotate&video_id="+a.id+"&is_promo=false&channel_id="+t).then((function(e){$('.b-list-item[data-id="'+a.id+'"]').slideUp(200,(function(){$(this).remove()})),b()}))}))}))})),$("body").on("click",".js-pub-all-btn",(function(){var n=[];if($(".js-check-video").each((function(e,t){!0===(t=$(t)).prop("checked")&&n.push({id:t.val()})})),!n.length||!$(".js-template").val())return!1;g();var a=S("call_auth_token_"+t);a||checkUser();$(".js-tab-item.current").data("tab").split(",")[1];$.each(n,(function(n,i){var r=JSON.parse(localStorage.getItem("template"));for(var o in r.push({name:"video_id",value:i.id}),r.push({name:"session_token",value:a}),r)"cta_image_id"==r[o].name&&(r[o].value=e);chrome.runtime.sendMessage({action:"pub_calls",data:r},(function(e){var n;if(n=!!$('.js-tab-item[data-tab="short,2"]').hasClass("current"),e.metadata_errors&&e.metadata_errors.length||e.error){$('.b-list-item[data-id="'+i.id+'"]').addClass("err"),$('.b-list-item[data-id="'+i.id+'"] input').prop("checked",!1),$(".js-check-all").prop("checked",!1);try{h(resp.metadata_errors[0].message)}catch(e){console.log(e)}b()}else $.get("/admin/call_to_action?action=annotate&video_id="+i.id+"&is_promo="+n+"&channel_id="+t).then((function(){b(),n?($('.b-list-item[data-id="'+i.id+'"] input').prop("checked",!1),$('.b-list-item[data-id="'+i.id+'"]').addClass("suc"),setTimeout((function(){$('.b-list-item[data-id="'+i.id+'"]').removeClass("suc")}),700)):$('.b-list-item[data-id="'+i.id+'"]').slideUp(200,(function(){$(this).remove()}))}))}))}))}))})):o&&$((function(){$("body").on("click",".js-get-tmp-btn",(function(){var e=$(".js-auth-token").val(),t=$(".js-ending-tmp").val(),n=[];if($(".js-check-video").each((function(e,t){!0===(t=$(t)).prop("checked")&&n.push({id:t.val()})})),!t||!n.length)return!1;g();var a=$(".js-tab-item.current").data("tab").split(",")[1];$.each(n,(function(n,i){c[a+"_end_"+i.id]={},chrome.runtime.sendMessage({action:"get_tmp_endings",id:i.id,tmpId:t,token:e},(function(e){b(),e.for_editor?(c[a+"_end_"+i.id]=e.for_editor,$('.b-list-item[data-id="'+i.id+'"]').addClass("suc").removeClass("err")):("error"===e.description&&0===e.error.status?h("You are not authorized"):400===e.error.status&&h("Something wrong!"),b(),$('.b-list-item[data-id="'+i.id+'"]').addClass("err"),$('.b-list-item[data-id="'+i.id+'"] input').prop("checked",!1),$(".js-check-all").prop("checked",!1))}))}))})),$("body").on("click",".js-revert-all-btn",(function(){var e={},n=[];if($(".js-check-video").each((function(e,t){!0===(t=$(t)).prop("checked")&&n.push({id:t.val()})})),!n.length)return!1;g();var a=S("annotation_auth_token_"+t);a||checkUser();var i=$(".js-tab-item.current").data("tab").split(",")[1];$.each(n,(function(n,r){c[i+"_end_"+r.id]?(e[r.id]=c[i+"_end_"+r.id],e[r.id].encrypted_video_id=r.id,e[r.id].action_save=1,e[r.id].v=r.id,e[r.id].session_token=a,chrome.runtime.sendMessage({action:"revert_endings",id:r.id,videoObj:e[r.id]},(function(e){"ok"===e.body?$.get("/admin/annotations?action=annotate&video_id="+r.id+"&is_promo=false&channel_id="+t).then((function(){$('.b-list-item[data-id="'+r.id+'"]').slideUp(200,(function(){$(this).remove()})),b()})):($('.b-list-item[data-id="'+r.id+'"]').addClass("err"),$('.b-list-item[data-id="'+r.id+'"] input').prop("checked",!1),$(".js-check-all").prop("checked",!1),b())}))):(b(),$('.b-list-item[data-id="'+r.id+'"]').addClass("err"))}))})),$("body").on("click",".js-pub-all-btn",(function(){var e={},n=[];if($(".js-check-video").each((function(e,t){!0===(t=$(t)).prop("checked")&&n.push({id:t.val()})})),!n.length)return!1;g();var a=S("annotation_auth_token_"+t);a||checkUser();var i=$(".js-tab-item.current").data("tab").split(",")[1];$.each(n,(function(n,r){c[i+"_end_"+r.id]?(e[r.id]=c[i+"_end_"+r.id],e[r.id].encrypted_video_id=r.id,e[r.id].action_save=1,e[r.id].v=r.id,e[r.id].session_token=a,chrome.runtime.sendMessage({action:"pub_endings",id:r.id,videoObj:e[r.id]},(function(e){var n;n=!!$('.js-tab-item[data-tab="short,2"]').hasClass("current"),e.error||e.errors?($('.b-list-item[data-id="'+r.id+'"]').addClass("err"),$('.b-list-item[data-id="'+r.id+'"] input').prop("checked",!1),$(".js-check-all").prop("checked",!1),b()):$.get("/admin/annotations?action=annotate&video_id="+r.id+"&is_promo="+n+"&channel_id="+t).then((function(){$('.b-list-item[data-id="'+r.id+'"]').slideUp(200,(function(){$(this).remove()})),b()}))}))):(b(),$('.b-list-item[data-id="'+r.id+'"]').addClass("err"))}))}))})),s){var d=function(e){var n=(new DOMParser).parseFromString(e,"text/html"),a=Array.prototype.slice.call(n.getElementsByTagName("script")),i=a.filter((function(e){return e.textContent.indexOf("GUIDED_HELP")>-1}));try{if(i=i[0].textContent.split("var ytInitialGuideData = JSON.parse(")[1].split(");")[0],i=JSON.parse(i),(i=JSON.parse(i)).responseContext.serviceTrackingParams.forEach((function(e){"GUIDED_HELP"===e.service&&(t=e.params[0].value)})),t)return u(t),void m(a,t);throw new Error("no channel ID")}catch(e){console.log(e)}i=a.filter((function(e){return e.textContent.indexOf("GUIDED_HELP")>-1})),t=i[0].textContent.indexOf('creator_channel_id","value":"')>-1?/creator_channel_id","value":"([^"]+)"/.exec(i[0].textContent)[1]:(t=$(n).find('.spf-link[title="Мой канал"]').attr("href")||$(n).find('.spf-link[title="My channel"]').attr("href")).split("/channel/")[1],u(t),m(a,t)},u=function(e){chrome.runtime.sendMessage({action:"get_title",id:e},(function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n="";n=t.getElementsByTagName("title")[1]?t.getElementsByTagName("title")[1].text:t.getElementsByTagName("title")[0].text,$(".js-channel-title").html(i+"&nbsp;-&nbsp;"+n)}))},m=function(e,t){var n=document.getElementsByClassName("b-list-wrap")[0],a=document.getElementsByClassName("js-auth-token")[0],i=e.filter((function(e){return e.textContent.indexOf("GAPI_HINT_PARAMS")>-1}));if(void 0===i[0])return alert("Auth token error!"),n.setAttribute("id","disable"),n.innerHTML="",b(),!1;var r="";i[0].textContent.indexOf('"XSRF_TOKEN"')>-1?r=/XSRF_TOKEN":"([^"]+)"/.exec(i[0].textContent)[1]:(i=e.filter((function(e){return e.textContent.indexOf("GOOGLE_HELP_CONTEXT")>-1})),r=/XSRF_TOKEN': "([^"]+)"/.exec(i[0].textContent)[1]),a.value=r,v(t,r),b(),_(t)},_=function(e){var t=document.getElementsByClassName("b-list-wrap")[0];localStorage.getItem(a)!=e?(localStorage.setItem(a,e),$(".js-tab-item.current").trigger("click")):localStorage.setItem(a,e),l&&($(".js-tab-item.current").trigger("click"),l=!1),t.setAttribute("id","")},v=function(e,t){var a=new Date,i=a.getTime()+33e5;a.setTime(i),document.cookie=n+e+"="+t+"; path=/; expires="+a.toGMTString()};"call_to_action"==s[0]?(n="call_auth_token_",a="call_ch_id",i="Call To Action"):(n="annotation_auth_token_",a="ann_ch_id",i="Endings");var f=document.getElementsByClassName("b-content"),p=document.createElement("div");p.setAttribute("class","js-get-token"),p.onclick=function(e){e.preventDefault(),g(),chrome.runtime.sendMessage({action:"get_id"},(function(e){d(e)}))},p.innerHTML="Get token",f[0].appendChild(p)}function h(e){$(".b-popup").addClass("_show"),$(".b-popup-box").html(e),setTimeout((function(){$(".b-popup").removeClass("_show")}),1500)}function g(){$(".b-loader").show()}function b(){$(".b-loader").hide()}function S(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}localStorage.setItem("videoSettings",JSON.stringify([{name:"title",value:""},{name:"description",value:""},{name:"keywords",value:""},{name:"privacy",value:"public"},{name:"notify_via_email",value:"true"},{name:"share_emails",value:""},{name:"deleted_ogids",value:""},{name:"deleted_circle_ids",value:""},{name:"deleted_emails",value:""},{name:"playlists_values",value:"InvalidValue"},{name:"privacy_draft",value:""},{name:"still_id",value:"0"},{name:"thumbnail_preview_version",value:""},{name:"claim_style",value:"ads"},{name:"claim_usage_policy",value:"S526445693826128"},{name:"claim_match_policy",value:""},{name:"allow_comments",value:"yes"},{name:"allow_comments_detail",value:"all"},{name:"allow_comments_sort_order",value:"top_comments"},{name:"allow_ratings",value:"yes"},{name:"reuse",value:"all_rights_reserved"},{name:"captions_certificate_reason",value:""},{name:"allow_embedding",value:"yes"},{name:"location_longitude",value:""},{name:"location_latitude",value:""},{name:"location_altitude",value:""},{name:"audio_language",value:"ru"},{name:"recorded_date",value:""},{name:"cta_text1",value:"Богатейшие кланы России"},{name:"cta_text2",value:"text2"},{name:"cta_text3",value:"text3"},{name:"cta_image_id",value:"1504107731885497"},{name:"cta_display_url",value:"www.vesti.ru"},{name:"cta_destination_url_scheme",value:"http://"},{name:"cta_destination_url",value:"www.vesti.ru/doc.html?id=2926720&utm_source=youtube&utm_medium=banner&utm_campaign=youtube-banner"},{name:"cta_enabled_on_mobile",value:"yes"},{name:"modified_fields",value:"cta_enabled_on_mobile,cta_display_url,cta_destination_url_scheme,cta_destination_url,cta_image_id"},{name:"allow_public_stats",value:"no"},{name:"captions_crowdsource",value:"no"},{name:"self_racy",value:"no"},{name:"creator_share_feeds",value:"yes"},{name:"claim_match_enabled",value:"no"}]))}()}});
//# sourceMappingURL=content_scripts.js.map