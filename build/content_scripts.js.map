{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/content_scripts.js","webpack:///./src/helpers.js","webpack:///./src/index.js"],"names":["listItemTmp","item","cookie_name","ch_id_name","channelId","topPlVideos","clearVideoCount","doneVideoCount","templates","IDS","MESSAGES","TEASERS","checkUser","loadOn","chrome","runtime","sendMessage","action","response","getChannelId","getTemplates","parser","DOMParser","doc","parseFromString","elArr","Array","prototype","slice","call","getElementsByTagName","sText","filter","el","textContent","indexOf","exec","getChannelTitle","checkAuthState","id","title","text","$","html","scripts","tagText","alert","loadOff","auth_token","setCookie","getTopPlVideos","checkChannelId","ytData","split","JSON","parse","contents","twoColumnBrowseResultsRenderer","tabs","tabRenderer","content","sectionListRenderer","itemSectionRenderer","playlistVideoListRenderer","length","forEach","video","playlistVideoRenderer","lengthSeconds","v","videoId","feature_templates","key","removeClass","setCard","videoData","clearResolve","Promise","setResolve","params","type","start_ms","show_warnings","video_item_id","video_url","custom_message","teaser_text","session_token","getCookie","lengthStep","Math","round","links","messages","teasers","each","idx","value","push","setCardRequest","cardVideoId","substr","action_create_video","channel_url","action_create_collaborator","addClass","resolve","reject","localStorageSetItem","error","setTimeout","reduce","previousPromise","then","clearCard","options","set","mainResolve","video_id","cards","localStorage","getItem","setItem","now","Date","time","getTime","expireTime","setTime","document","cookie","toGMTString","localStorageGetItem","append","on","e","preventDefault","has_card","currentTarget","dataset","btn","toggleClass","hasClass","closest","keydown","which","innerHTML","parent","siblings","val","trigger","data","teaser","message","show","showPopup","hidePopup","hide","name","matches","match","RegExp","replace","decodeURIComponent","undefined","oldArray","newArray","unique","concat","stringify","arr","i","len","out","obj","page","URL"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAT,CAAsBC,IAAtB,EAA4B;AAC1B,+CAAoCA,IAApC;AACD;;AAEc,2EAAW;AACxB,MAAMC,WAAW,GAAG,mBAApB;AACA,MAAMC,UAAU,GAAG,kBAAnB;AACA,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,WAAW,GAAG,EAAlB;AACA,MAAIC,eAAe,GAAG,CAAtB;AACA,MAAIC,cAAc,GAAG,CAArB;AACA,MAAMC,SAAS,GAAG;AAChBC,OAAG,EAAE,EADW;AAEhBC,YAAQ,EAAE,EAFM;AAGhBC,WAAO,EAAE;AAHO,GAAlB;AAMAC,WAAS;;AAET,WAASA,SAAT,GAAqB;AAEnBC,2DAAM;AAENC,UAAM,CAACC,OAAP,CAAeC,WAAf,CAA2B;AAAEC,YAAM,EAAE;AAAV,KAA3B,EAAiD,UAAAC,QAAQ,EAAI;AAC3DC,kBAAY,CAACD,QAAD,CAAZ;AACD,KAFD;AAIAE,gBAAY;AACb;;AAED,WAASD,YAAT,CAAsBD,QAAtB,EAAgC;AAC9B,QAAIG,MAAM,GAAG,IAAIC,SAAJ,EAAb;AACA,QAAIC,GAAG,GAAGF,MAAM,CAACG,eAAP,CAAuBN,QAAvB,EAAiC,WAAjC,CAAV;AACA,QAAIO,KAAK,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BN,GAAG,CAACO,oBAAJ,CAAyB,QAAzB,CAA3B,CAAZ;AACA,QAAIC,KAAK,GAAGN,KAAK,CAACO,MAAN,CAAa,UAASC,EAAT,EAAa;AACpC,aAAOA,EAAE,CAACC,WAAH,CAAeC,OAAf,CAAuB,aAAvB,IAAwC,CAAC,CAAhD;AACD,KAFW,CAAZ;;AAIA,QAAIJ,KAAK,CAAC,CAAD,CAAL,CAASG,WAAT,CAAqBC,OAArB,CAA6B,+BAA7B,IAAgE,CAAC,CAArE,EAAwE;AACtE/B,eAAS,GAAG,wCAAwCgC,IAAxC,CACVL,KAAK,CAAC,CAAD,CAAL,CAASG,WADC,EAEV,CAFU,CAAZ;AAGD,KAJD,MAIO;AACLH,WAAK,GAAGN,KAAK,CAACO,MAAN,CAAa,UAASC,EAAT,EAAa;AAChC,eAAOA,EAAE,CAACC,WAAH,CAAeC,OAAf,CAAuB,kBAAvB,IAA6C,CAAC,CAArD;AACD,OAFO,CAAR;AAGA/B,eAAS,GAAG,gCAAgCgC,IAAhC,CAAqCL,KAAK,CAAC,CAAD,CAAL,CAASG,WAA9C,EAA2D,CAA3D,CAAZ;AACD;;AAEDG,mBAAe,CAACjC,SAAD,CAAf;AAEAkC,kBAAc,CAACb,KAAD,EAAQrB,SAAR,CAAd;AACD;;AAED,WAASiC,eAAT,CAAyBjC,SAAzB,EAAoC;AAClCU,UAAM,CAACC,OAAP,CAAeC,WAAf,CACE;AAAEC,YAAM,EAAE,WAAV;AAAuBsB,QAAE,EAAEnC;AAA3B,KADF,EAEE,UAAAc,QAAQ,EAAI;AACV,UAAIG,MAAM,GAAG,IAAIC,SAAJ,EAAb;AACA,UAAIC,GAAG,GAAGF,MAAM,CAACG,eAAP,CAAuBN,QAAvB,EAAiC,WAAjC,CAAV;AACA,UAAIsB,KAAK,GAAG,EAAZ;;AAEA,UAAIjB,GAAG,CAACO,oBAAJ,CAAyB,OAAzB,EAAkC,CAAlC,CAAJ,EAA0C;AACxCU,aAAK,GAAGjB,GAAG,CAACO,oBAAJ,CAAyB,OAAzB,EAAkC,CAAlC,EAAqCW,IAA7C;AACD,OAFD,MAEO;AACLD,aAAK,GAAGjB,GAAG,CAACO,oBAAJ,CAAyB,OAAzB,EAAkC,CAAlC,EAAqCW,IAA7C;AACD;;AAEDC,OAAC,CAAC,gBAAD,CAAD,CAAoBC,IAApB,CAAyBH,KAAzB;AACD,KAdH;AAgBD;;AAED,WAASF,cAAT,CAAwBM,OAAxB,EAAiCxC,SAAjC,EAA4C;AAC1C,QAAIyC,OAAO,GAAGD,OAAO,CAACZ,MAAR,CAAe,UAASC,EAAT,EAAa;AACxC,aAAOA,EAAE,CAACC,WAAH,CAAeC,OAAf,CAAuB,kBAAvB,IAA6C,CAAC,CAArD;AACD,KAFa,CAAd;;AAIA,QAAI,OAAOU,OAAO,CAAC,CAAD,CAAd,KAAsB,WAA1B,EAAuC;AACrCC,WAAK,CAAC,mBAAD,CAAL;AACAC,8DAAO;AACP,aAAO,KAAP;AACD;;AAED,QAAIC,UAAU,GAAG,EAAjB;;AACA,QAAIH,OAAO,CAAC,CAAD,CAAP,CAAWX,WAAX,CAAuBC,OAAvB,CAA+B,cAA/B,IAAiD,CAAC,CAAtD,EAAyD;AACvDa,gBAAU,GAAG,wBAAwBZ,IAAxB,CAA6BS,OAAO,CAAC,CAAD,CAAP,CAAWX,WAAxC,EAAqD,CAArD,CAAb;AACD,KAFD,MAEO;AACLW,aAAO,GAAGD,OAAO,CAACZ,MAAR,CAAe,UAASC,EAAT,EAAa;AACpC,eAAOA,EAAE,CAACC,WAAH,CAAeC,OAAf,CAAuB,qBAAvB,IAAgD,CAAC,CAAxD;AACD,OAFS,CAAV;AAGAa,gBAAU,GAAG,yBAAyBZ,IAAzB,CAA8BS,OAAO,CAAC,CAAD,CAAP,CAAWX,WAAzC,EAAsD,CAAtD,CAAb;AACD;;AAEDe,aAAS,CAAC7C,SAAD,EAAY4C,UAAZ,CAAT;AAEAE,kBAAc;AAEdC,kBAAc,CAAC/C,SAAD,CAAd;AACD;;AAED,WAAS8C,cAAT,GAA0B;AACxBpC,UAAM,CAACC,OAAP,CAAeC,WAAf,CACE;AAAEC,YAAM,EAAE,eAAV;AAA2BsB,QAAE,EAAEnC;AAA/B,KADF,EAEE,UAAAc,QAAQ,EAAI;AACV,UAAIG,MAAM,GAAG,IAAIC,SAAJ,EAAb;AACA,UAAIC,GAAG,GAAGF,MAAM,CAACG,eAAP,CAAuBN,QAAvB,EAAiC,WAAjC,CAAV;AACA,UAAIO,KAAK,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CACVN,GAAG,CAACO,oBAAJ,CAAyB,QAAzB,CADU,CAAZ;AAGA,UAAIC,KAAK,GAAGN,KAAK,CAACO,MAAN,CAAa,UAASC,EAAT,EAAa;AACpC,eAAOA,EAAE,CAACC,WAAH,CAAeC,OAAf,CAAuB,iBAAvB,IAA4C,CAAC,CAApD;AACD,OAFW,CAAZ;AAIA,UAAIiB,MAAM,GAAGrB,KAAK,CAAC,CAAD,CAAL,CAASG,WAAT,CACVmB,KADU,CACJ,4BADI,EAC0B,CAD1B,EAEVA,KAFU,CAEJ,GAFI,CAAb;AAGAhD,iBAAW,GAAGiD,IAAI,CAACC,KAAL,CAAWH,MAAM,CAAC,CAAD,CAAjB,EAAsBI,QAAtB,CACXC,8BADW,CACoBC,IADpB,CACyB,CADzB,EAC4BC,WAD5B,CACwCC,OADxC,CAEXC,mBAFW,CAESL,QAFT,CAEkB,CAFlB,EAEqBM,mBAFrB,CAEyCN,QAFzC,CAEkD,CAFlD,EAGXO,yBAHW,CAGeP,QAH7B;AAKAlD,qBAAe,GAAGD,WAAW,CAAC2D,MAA9B;AAEA3D,iBAAW,CAAC4D,OAAZ,CAAoB,UAAAhE,IAAI,EAAI;AAC1B,YAAIiE,KAAK,GAAGjE,IAAI,CAACkE,qBAAjB;;AAEA,YAAID,KAAK,CAACE,aAAV,EAAyB;AACvBtD,gBAAM,CAACC,OAAP,CAAeC,WAAf,CACE;AAAEC,kBAAM,EAAE,YAAV;AAAwBoD,aAAC,EAAEH,KAAK,CAACI;AAAjC,WADF,EAEE,UAAApD,QAAQ,EAAI;AACVjB,gBAAI,CAAC,OAAD,CAAJ,GAAgB,EAAhB;;AAEA,gBACEiB,QAAQ,CAACqD,iBAAT,CAA2BP,MAA3B,IACA9C,QAAQ,CAACqD,iBAAT,CAA2B,CAA3B,EAA8BC,GAFhC,EAGE;AACAvE,kBAAI,CAAC,UAAD,CAAJ,GAAmB,IAAnB;AACAA,kBAAI,CAAC,OAAD,CAAJ,GAAgBiB,QAAQ,CAACqD,iBAAzB;AACAhE,4BAAc;AACdD,6BAAe;AAChB;;AAEDyC,oEAAO;AAEPL,aAAC,CAAC,kBAAD,CAAD,CAAsB+B,WAAtB,CAAkC,MAAlC;AACA/B,aAAC,CAAC,eAAD,CAAD,CAAmBD,IAAnB,CAAwBnC,eAAxB;AACAoC,aAAC,CAAC,gBAAD,CAAD,CAAoBD,IAApB,CAAyBlC,cAAzB;AACD,WApBH;AAsBD;AACF,OA3BD;AA4BD,KAlDH;AAoDD;;AAED,WAASmE,OAAT,CAAiBC,SAAjB,EAA4BT,KAA5B,EAAmCU,YAAnC,EAAiD;AAC/C,WAAO,IAAIC,OAAJ,CAAY,UAAAC,UAAU,EAAI;AAC/B,UAAIC,MAAM,GAAG;AACXP,WAAG,EAAE,EADM;AAEXQ,YAAI,EAAE,OAFK;AAGXC,gBAAQ,EAAE,KAHC;AAIXC,qBAAa,EAAE,IAJJ;AAKXC,qBAAa,EAAE,EALJ;AAMXC,iBAAS,EAAE,EANA;AAOXC,sBAAc,EAAE,EAPL;AAQXC,mBAAW,EAAE,EARF;AASXC,qBAAa,EAAEC,0DAAS,CAACtF,WAAW,GAAGE,SAAf;AATb,OAAb;AAYA,UAAIqF,UAAU,GAAG,MAAM,IAAvB;;AAEA,UAAId,SAAS,CAACP,aAAV,GAA0B,GAA9B,EAAmC;AACjCqB,kBAAU,GAAGC,IAAI,CAACC,KAAL,CAAYhB,SAAS,CAACP,aAAV,GAA0B,CAA3B,GAAgC,IAA3C,CAAb;AACAW,cAAM,CAACE,QAAP,GAAkBQ,UAAlB;AACD;;AAED,UAAMG,KAAK,GAAG,EAAd;AACA,UAAMC,QAAQ,GAAG,EAAjB;AACA,UAAMC,OAAO,GAAG,EAAhB;AAEApD,OAAC,CAAC,gBAAD,CAAD,CAAoBqD,IAApB,CAAyB,UAACC,GAAD,EAAM/F,IAAN,EAAe;AACtC,YAAIA,IAAI,CAACgG,KAAT,EAAgB;AACdL,eAAK,CAACM,IAAN,CAAWjG,IAAI,CAACgG,KAAhB;AACD;AACF,OAJD;AAMAvD,OAAC,CAAC,iBAAD,CAAD,CAAqBqD,IAArB,CAA0B,UAACC,GAAD,EAAM/F,IAAN,EAAe;AACvC4F,gBAAQ,CAACK,IAAT,CAAcjG,IAAI,CAACgG,KAAL,GAAahG,IAAI,CAACgG,KAAlB,GAA0B,EAAxC;AACD,OAFD;AAIAvD,OAAC,CAAC,cAAD,CAAD,CAAkBqD,IAAlB,CAAuB,UAACC,GAAD,EAAM/F,IAAN,EAAe;AACpC6F,eAAO,CAACI,IAAR,CAAajG,IAAI,CAACgG,KAAL,GAAahG,IAAI,CAACgG,KAAlB,GAA0B,EAAvC;AACD,OAFD;;AAIA,UAAME,cAAc,GAAG,SAAjBA,cAAiB,CAACC,WAAD,EAAcJ,GAAd,EAAsB;AAC3C,YAAII,WAAW,CAACC,MAAZ,CAAmB,CAAnB,EAAqB,CAArB,MAA4B,IAAhC,EAAsC;AACpC,iBAAOtB,MAAM,CAACuB,mBAAd;AACAvB,gBAAM,CAAC,4BAAD,CAAN,GAAuC,CAAvC;AACAA,gBAAM,CAAC,aAAD,CAAN,GAAwBqB,WAAxB;AACArB,gBAAM,CAAC,MAAD,CAAN,GAAiB,cAAjB;AACD,SALD,MAKM;AACJ,iBAAOA,MAAM,CAACwB,WAAd;AACA,iBAAOxB,MAAM,CAACyB,0BAAd;AACAzB,gBAAM,CAAC,qBAAD,CAAN,GAAgC,CAAhC;AACAA,gBAAM,CAAC,MAAD,CAAN,GAAiB,OAAjB;AACD;;AAEDA,cAAM,CAACI,aAAP,GAAuBiB,WAAvB;AACArB,cAAM,CAACM,cAAP,GAAwBQ,QAAQ,CAACG,GAAD,CAAhC;AACAjB,cAAM,CAACO,WAAP,GAAqBQ,OAAO,CAACE,GAAD,CAA5B;;AAEA,YAAIA,GAAG,GAAG,CAAV,EAAa;AACXjB,gBAAM,CAACE,QAAP,IAAmBQ,UAAnB;AACD;;AAED/C,SAAC,CAAC,aAAD,CAAD,CAAiB+D,QAAjB,CAA0B,OAA1B;AAEA,eAAO,IAAI5B,OAAJ,CAAY,UAAC6B,OAAD,EAAUC,MAAV,EAAqB;AACtC7F,gBAAM,CAACC,OAAP,CAAeC,WAAf,CACE;AAAEC,kBAAM,EAAE,UAAV;AAAsBoD,aAAC,EAAEM,SAAS,CAACL,OAAnC;AAA4CS,kBAAM,EAAEA;AAApD,WADF,EAEE,UAAA7D,QAAQ,EAAI;AACV0F,gFAAmB,CAAC,KAAD,EAAQ7B,MAAM,CAACI,aAAf,CAAnB;AACAyB,gFAAmB,CAAC,UAAD,EAAa7B,MAAM,CAACM,cAApB,CAAnB;AACAuB,gFAAmB,CAAC,SAAD,EAAY7B,MAAM,CAACO,WAAnB,CAAnB;AAEAoB,mBAAO;;AAEP,gBAAGxF,QAAQ,CAAC2F,KAAZ,EAAkB;AAChBF,oBAAM;AACP;;AAED,gBAAIX,GAAG,KAAKJ,KAAK,CAAC5B,MAAN,GAAe,CAA3B,EAA8B;AAC5B,kBAAIxD,UAAS,GAAGU,QAAQ,CACrBmC,KADa,CACP,YADO,EACO,CADP,EAEbA,KAFa,CAEP,aAFO,EAEQ,CAFR,CAAhB;AAIAa,mBAAK,CAAC,OAAD,CAAL,GAAiBZ,IAAI,CAACC,KAAL,CAAW/C,UAAX,EAAsB+D,iBAAvC;AACAjE,6BAAe;AACfC,4BAAc;AACd2D,mBAAK,CAAC,UAAD,CAAL,GAAoB,IAApB;AAEAxB,eAAC,CAAC,eAAD,CAAD,CAAmBD,IAAnB,CAAwBnC,eAAxB;AACAoC,eAAC,CAAC,gBAAD,CAAD,CAAoBD,IAApB,CAAyBlC,cAAzB;AAEAa,0BAAY;AAEZ0F,wBAAU,CAAC,YAAM;AACfpE,iBAAC,CAAC,aAAD,CAAD,CAAiB+B,WAAjB,CAA6B,OAA7B;AAEAG,4BAAY,GAAGA,YAAY,EAAf,GAAoBE,UAAU,EAA1C;AACD,eAJS,EAIR,IAJQ,CAAV;AAKD;AACF,WAlCH;AAoCD,SArCM,CAAP;AAsCD,OA7DD;;AA+DAc,WAAK,CAACmB,MAAN,CAAa,UAACC,eAAD,EAAkBZ,WAAlB,EAA+BJ,GAA/B,EAAuC;AAClD,eAAOgB,eAAe,CAACC,IAAhB,CAAqB,YAAM;AAChC,iBAAOd,cAAc,CAACC,WAAD,EAAcJ,GAAd,CAArB;AACD,SAFM,CAAP;AAGD,OAJD,EAIGnB,OAAO,CAAC6B,OAAR,EAJH;AAKD,KA1GM,CAAP;AA2GD;;AAED,WAASQ,SAAT,CAAmBC,OAAnB,EAA4B;AAAA,QACnBxC,SADmB,GACMwC,OADN,CACnBxC,SADmB;AAAA,QACRT,KADQ,GACMiD,OADN,CACRjD,KADQ;AAAA,QACDkD,GADC,GACMD,OADN,CACDC,GADC;AAE1B,WAAO,IAAIvC,OAAJ,CAAY,UAAAwC,WAAW,EAAI;AAChC,UAAMlB,cAAc,GAAG,SAAjBA,cAAiB,CAAClG,IAAD,EAAO+F,GAAP,EAAe;AACpC,YAAIjB,MAAM,GAAG;AACXP,aAAG,EAAEvE,IAAI,CAACuE,GADC;AAEXQ,cAAI,EAAE/E,IAAI,CAAC+E,IAFA;AAGXC,kBAAQ,EAAEhF,IAAI,CAACgF,QAHJ;AAIXC,uBAAa,EAAE,IAJJ;AAKXC,uBAAa,EAAElF,IAAI,CAACqH,QALT;AAMXlC,mBAAS,EAAE,EANA;AAOXmB,qBAAW,EAAEtG,IAAI,CAACsG,WAPP;AAQXlB,wBAAc,EAAEpF,IAAI,CAACoF,cARV;AASXC,qBAAW,EAAErF,IAAI,CAACqF,WATP;AAUXC,uBAAa,EAAEC,0DAAS,CAACtF,WAAW,GAAGE,SAAf;AAVb,SAAb;AAaA,eAAO,IAAIyE,OAAJ,CAAY,UAAA6B,OAAO,EAAI;AAC5BhE,WAAC,CAAC,aAAD,CAAD,CAAiB+D,QAAjB,CAA0B,OAA1B;AAEA3F,gBAAM,CAACC,OAAP,CAAeC,WAAf,CACE;AAAEC,kBAAM,EAAE,YAAV;AAAwBoD,aAAC,EAAEM,SAAS,CAACL,OAArC;AAA8CS,kBAAM,EAAEA;AAAtD,WADF,EAEE,YAAM;AACJ2B,mBAAO;;AAEP,gBAAIV,GAAG,KAAK9B,KAAK,CAACqD,KAAN,CAAYvD,MAAZ,GAAqB,CAAjC,EAAoC;AAClC,qBAAOE,KAAK,CAAC,UAAD,CAAZ;AAEA5D,6BAAe;AACfC,4BAAc;AAEdmC,eAAC,CAAC,eAAD,CAAD,CAAmBD,IAAnB,CAAwBnC,eAAxB;AACAoC,eAAC,CAAC,gBAAD,CAAD,CAAoBD,IAApB,CAAyBlC,cAAzB;AAEAmC,eAAC,CAAC,aAAD,CAAD,CAAiB+B,WAAjB,CAA6B,OAA7B;AAEA2C,iBAAG,GAAG1C,OAAO,CAACC,SAAD,EAAYT,KAAZ,EAAmBmD,WAAnB,CAAV,GAA4CA,WAAW,EAA1D;AACD;AACF,WAlBH;AAoBD,SAvBM,CAAP;AAwBD,OAtCD;;AAwCAnD,WAAK,CAACqD,KAAN,CAAYR,MAAZ,CAAmB,UAACC,eAAD,EAAkB/G,IAAlB,EAAwB+F,GAAxB,EAAgC;AACjD,eAAOgB,eAAe,CAACC,IAAhB,CAAqB,YAAM;AAChC,iBAAOd,cAAc,CAAClG,IAAD,EAAO+F,GAAP,CAArB;AACD,SAFM,CAAP;AAGD,OAJD,EAIGnB,OAAO,CAAC6B,OAAR,EAJH;AAKD,KA9CM,CAAP;AA+CD;;AAED,WAASvD,cAAT,CAAwB/C,SAAxB,EAAmC;AACjC,QAAIoH,YAAY,CAACC,OAAb,CAAqBtH,UAArB,KAAoCC,SAAxC,EAAmD;AACjDoH,kBAAY,CAACE,OAAb,CAAqBvH,UAArB,EAAiCC,SAAjC;AACD,KAFD,MAEO;AACLoH,kBAAY,CAACE,OAAb,CAAqBvH,UAArB,EAAiCC,SAAjC;AACD;AACF;;AAED,WAAS6C,SAAT,CAAmB7C,SAAnB,EAA8B4C,UAA9B,EAA0C;AACxC,QAAI2E,GAAG,GAAG,IAAIC,IAAJ,EAAV;AACA,QAAIC,IAAI,GAAGF,GAAG,CAACG,OAAJ,EAAX;AACA,QAAIC,UAAU,GAAGF,IAAI,GAAG,OAAO,IAA/B;AACAF,OAAG,CAACK,OAAJ,CAAYD,UAAZ;AACAE,YAAQ,CAACC,MAAT,GACEhI,WAAW,GACXE,SADA,GAEA,GAFA,GAGA4C,UAHA,GAIA,oBAJA,GAKA2E,GAAG,CAACQ,WAAJ,EANF;AAOD;;AAED,WAAS/G,YAAT,GAAwB;AACtBZ,aAAS,CAACC,GAAV,GAAgB2H,oEAAmB,CAAC,KAAD,CAAnB,IAA8B,EAA9C;AACA5H,aAAS,CAACE,QAAV,GAAqB0H,oEAAmB,CAAC,UAAD,CAAnB,IAAmC,EAAxD;AACA5H,aAAS,CAACG,OAAV,GAAoByH,oEAAmB,CAAC,SAAD,CAAnB,IAAkC,EAAtD;AAEA1F,KAAC,CAAC,eAAD,CAAD,CAAmBC,IAAnB,CAAwB,EAAxB;AAEAnC,aAAS,CAACC,GAAV,CAAcwD,OAAd,CAAsB,UAAChE,IAAD,EAAU;AAC9ByC,OAAC,CAAC,WAAD,CAAD,CAAe2F,MAAf,CAAsBrI,WAAW,CAACC,IAAD,CAAjC;AACD,KAFD;AAIAO,aAAS,CAACE,QAAV,CAAmBuD,OAAnB,CAA2B,UAAChE,IAAD,EAAU;AACnCyC,OAAC,CAAC,gBAAD,CAAD,CAAoB2F,MAApB,CAA2BrI,WAAW,CAACC,IAAD,CAAtC;AACD,KAFD;AAIAO,aAAS,CAACG,OAAV,CAAkBsD,OAAlB,CAA0B,UAAChE,IAAD,EAAU;AAClCyC,OAAC,CAAC,eAAD,CAAD,CAAmB2F,MAAnB,CAA0BrI,WAAW,CAACC,IAAD,CAArC;AACD,KAFD;AAGD,GAjWuB,CAmWxB;;;AACAyC,GAAC,CAAC,kBAAD,CAAD,CAAsB4F,EAAtB,CAAyB,OAAzB,EAAkC,UAAAC,CAAC,EAAI;AACrCA,KAAC,CAACC,cAAF;AAEA,QAAM5C,KAAK,GAAG,EAAd;AAEAlD,KAAC,CAAC,gBAAD,CAAD,CAAoBqD,IAApB,CAAyB,UAACC,GAAD,EAAM/F,IAAN,EAAe;AACtC,UAAIA,IAAI,CAACgG,KAAT,EAAgB;AACdL,aAAK,CAACM,IAAN,CAAWjG,IAAI,CAACgG,KAAhB;AACD;AACF,KAJD;AAMA,QAAI,CAACL,KAAK,CAAC5B,MAAX,EAAmB;AAEnB3D,eAAW,CAAC0G,MAAZ,CAAmB,UAACC,eAAD,EAAkB/G,IAAlB,EAA2B;AAC5C,aAAO+G,eAAe,CAACC,IAAhB,CAAqB,YAAM;AAChC,YAAIhH,IAAI,CAACwI,QAAT,EAAmB;AACjB,iBAAOvB,SAAS,CAAC;AAACvC,qBAAS,EAAE1E,IAAI,CAACkE,qBAAjB;AAAwCD,iBAAK,EAAEjE,IAA/C;AAAqDmH,eAAG,EAAE;AAA1D,WAAD,CAAhB;AACD;;AAED,eAAO1C,OAAO,CAACzE,IAAI,CAACkE,qBAAN,EAA6BlE,IAA7B,CAAd;AACD,OANM,CAAP;AAOD,KARD,EAQG4E,OAAO,CAAC6B,OAAR,EARH;AASD,GAtBD,EApWwB,CA4XxB;;AACAhE,GAAC,CAAC,oBAAD,CAAD,CAAwB4F,EAAxB,CAA2B,OAA3B,EAAoC,UAAAC,CAAC,EAAI;AACvCA,KAAC,CAACC,cAAF;AAEAnI,eAAW,CAAC0G,MAAZ,CAAmB,UAACC,eAAD,EAAkB/G,IAAlB,EAA2B;AAC5C,UAAI,CAACA,IAAI,CAACwI,QAAV,EAAoB;AAClB,eAAO5D,OAAO,CAAC6B,OAAR,EAAP;AACD;;AAED,aAAOM,eAAe,CAACC,IAAhB,CAAqB,YAAM;AAChC,eAAOC,SAAS,CAAC;AAACvC,mBAAS,EAAE1E,IAAI,CAACkE,qBAAjB;AAAwCD,eAAK,EAAEjE,IAA/C;AAAqDmH,aAAG,EAAE;AAA1D,SAAD,CAAhB;AACD,OAFM,CAAP;AAGD,KARD,EAQGvC,OAAO,CAAC6B,OAAR,EARH;AASD,GAZD;AAeAhE,GAAC,CAAC,WAAD,CAAD,CAAe4F,EAAf,CAAkB,OAAlB,EAA2B,UAACC,CAAD,EAAO;AAChC,QAAMvD,IAAI,GAAGuD,CAAC,CAACG,aAAF,CAAgBC,OAAhB,CAAwB3D,IAArC;AACA,QAAM4D,GAAG,GAAGlG,CAAC,CAAC6F,CAAC,CAACG,aAAH,CAAb;AAGAE,OAAG,CAACC,WAAJ,CAAgB,MAAhB;;AAEA,QAAIrI,SAAS,CAACwE,IAAD,CAAT,CAAgBhB,MAApB,EAA4B;AAC1B,UAAI4E,GAAG,CAACE,QAAJ,CAAa,MAAb,CAAJ,EAA0B;AACxBpG,SAAC,CAAC,aAAD,CAAD,CAAiBqG,OAAjB,CAAyB,KAAzB,EAAgCtE,WAAhC,CAA4C,OAA5C;AACAmE,WAAG,CAACG,OAAJ,CAAY,KAAZ,EAAmBtC,QAAnB,CAA4B,OAA5B;AACD,OAHD,MAGM;AACJ/D,SAAC,CAAC,WAAD,CAAD,CAAe+B,WAAf,CAA2B,MAA3B;AACAmE,WAAG,CAACG,OAAJ,CAAY,KAAZ,EAAmBtE,WAAnB,CAA+B,OAA/B;AACD,OAPyB,CAQ1B;;AACD;AACF,GAjBD,EA5YwB,CA+ZxB;;AACA/B,GAAC,CAAC,MAAD,CAAD,CAAUsG,OAAV,CAAkB,UAACT,CAAD,EAAO;AACvB,QAAIA,CAAC,CAACU,KAAF,KAAY,EAAhB,EAAoB;AAClBvG,OAAC,CAAC,WAAD,CAAD,CAAe+B,WAAf,CAA2B,MAA3B;AACA/B,OAAC,CAAC,aAAD,CAAD,CAAiB+B,WAAjB,CAA6B,OAA7B;AACD;AACF,GALD,EAhawB,CAuaxB;;AACA/B,GAAC,CAAC,MAAD,CAAD,CAAU4F,EAAV,CAAa,OAAb,EAAqB,eAArB,EAAsC,UAACC,CAAD,EAAO;AAC3C,QAAMtC,KAAK,GAAGsC,CAAC,CAACG,aAAF,CAAgBQ,SAA9B;AAEAxG,KAAC,CAAC6F,CAAC,CAACG,aAAH,CAAD,CAAmBS,MAAnB,GAA4BC,QAA5B,CAAqC,OAArC,EAA8CC,GAA9C,CAAkDpD,KAAlD,EAAyDqD,OAAzD,CAAiE,QAAjE;AAEA5G,KAAC,CAAC,aAAD,CAAD,CAAiB+B,WAAjB,CAA6B,OAA7B;AACA/B,KAAC,CAAC,WAAD,CAAD,CAAe+B,WAAf,CAA2B,MAA3B;AACD,GAPD;AASA/B,GAAC,CAAC,gBAAD,CAAD,CAAoB4F,EAApB,CAAuB,QAAvB,EAAiC,UAACC,CAAD,EAAO;AACtC,QAAMtI,IAAI,GAAGyC,CAAC,CAAC6F,CAAC,CAACG,aAAH,CAAd;AACA,QAAMnG,EAAE,GAAGtC,IAAI,CAACsJ,IAAL,CAAU,IAAV,CAAX;AACA,QAAMC,MAAM,GAAG9G,CAAC,uCAA+BH,EAA/B,SAAhB;AACA,QAAMkH,OAAO,GAAG/G,CAAC,0CAAkCH,EAAlC,SAAjB;AACA,QAAM8G,GAAG,GAAGpJ,IAAI,CAACoJ,GAAL,EAAZ;;AAEA,QAAIA,GAAG,CAAChD,MAAJ,CAAW,CAAX,EAAa,CAAb,MAAoB,IAAxB,EAA8B;AAC5B,UAAI,CAACmD,MAAM,CAACH,GAAP,EAAL,EAAmB;AACjBG,cAAM,CAAC/C,QAAP,CAAgB,eAAhB;AACD;;AAED,UAAI,CAACgD,OAAO,CAACJ,GAAR,EAAL,EAAoB;AAClBI,eAAO,CAAChD,QAAR,CAAiB,eAAjB;AACD;AACF,KARD,MAQK;AACH+C,YAAM,CAAC/E,WAAP,CAAmB,eAAnB;AACAgF,aAAO,CAAChF,WAAR,CAAoB,eAApB;AACD;AACF,GAnBD;AAqBA/B,GAAC,CAAC,8BAAD,CAAD,CAAkC4F,EAAlC,CAAqC,cAArC,EAAqD,UAACC,CAAD,EAAO;AAC1D,QAAMtI,IAAI,GAAGyC,CAAC,CAAC6F,CAAC,CAACG,aAAH,CAAd;AACA,QAAMnG,EAAE,GAAGtC,IAAI,CAACsJ,IAAL,CAAU,IAAV,CAAX;AACA,QAAMrF,KAAK,GAAGxB,CAAC,yCAAiCH,EAAjC,SAAf;;AAEA,QAAI2B,KAAK,CAACmF,GAAN,GAAYhD,MAAZ,CAAmB,CAAnB,EAAqB,CAArB,MAA4B,IAAhC,EAAsC;AACpC,UAAIpG,IAAI,CAACoJ,GAAL,EAAJ,EAAgB;AACdpJ,YAAI,CAACwE,WAAL,CAAiB,eAAjB;AACD,OAFD,MAEM;AACJxE,YAAI,CAACwG,QAAL,CAAc,eAAd;AACD;AACF;AACF,GAZD;AAaD,C;;;;;;;;;;;;AC/dD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,SAAS5F,MAAT,GAAkB;AACvB6B,GAAC,CAAC,WAAD,CAAD,CAAegH,IAAf;AACD;AAEM,SAASC,SAAT,CAAmBlH,IAAnB,EAAyB;AAC9BC,GAAC,CAAC,UAAD,CAAD,CAAc+D,QAAd,CAAuB,OAAvB;AACA/D,GAAC,CAAC,cAAD,CAAD,CAAkBC,IAAlB,CAAuBF,IAAvB;AACAqE,YAAU,CAAC,YAAM;AACf8C,aAAS;AACV,GAFS,EAEP,IAFO,CAAV;AAGD;AAEM,SAASA,SAAT,GAAqB;AAC1BlH,GAAC,CAAC,UAAD,CAAD,CAAc+B,WAAd,CAA0B,OAA1B;AACD;AAEM,SAAS1B,OAAT,GAAmB;AACxBL,GAAC,CAAC,WAAD,CAAD,CAAemH,IAAf;AACD;AAEM,SAASrE,SAAT,CAAmBsE,IAAnB,EAAyB;AAC9B,MAAIC,OAAO,GAAG9B,QAAQ,CAACC,MAAT,CAAgB8B,KAAhB,CACZ,IAAIC,MAAJ,CACE,aACEH,IAAI,CAACI,OAAL,CAAa,8BAAb,EAA6C,MAA7C,CADF,GAEE,UAHJ,CADY,CAAd;AAOA,SAAOH,OAAO,GAAGI,kBAAkB,CAACJ,OAAO,CAAC,CAAD,CAAR,CAArB,GAAoCK,SAAlD;AACD;AAEM,SAASxD,mBAAT,CAA6BpC,GAA7B,EAAkCyB,KAAlC,EAAyC;AAC9C,MAAI,CAACA,KAAL,EAAY;AAEZ,MAAIoE,QAAQ,GAAGjC,mBAAmB,CAAC5D,GAAD,CAAlC;;AAEA,MAAI,CAAC6F,QAAL,EAAe;AACbA,YAAQ,GAAG,EAAX;AACD;;AAED,MAAMC,QAAQ,GAAGC,MAAM,CAACF,QAAQ,CAACG,MAAT,CAAgBvE,KAAhB,CAAD,CAAvB;AAEAuB,cAAY,CAACE,OAAb,CAAqBlD,GAArB,EAA0BlB,IAAI,CAACmH,SAAL,CAAeH,QAAf,CAA1B;AACD;AAEM,SAASlC,mBAAT,CAA6B5D,GAA7B,EAAkC;AACvC,SAAOlB,IAAI,CAACC,KAAL,CAAWiE,YAAY,CAACC,OAAb,CAAqBjD,GAArB,CAAX,CAAP;AACD;;AAED,SAAS+F,MAAT,CAAgBG,GAAhB,EAAqB;AACnB,MAAIC,CAAJ;AAAA,MACIC,GAAG,GAAGF,GAAG,CAAC1G,MADd;AAAA,MAEI6G,GAAG,GAAG,EAFV;AAAA,MAGIC,GAAG,GAAG,EAHV;;AAKA,OAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACtBG,OAAG,CAACJ,GAAG,CAACC,CAAD,CAAJ,CAAH,GAAc,CAAd;AACH;;AACD,OAAKA,CAAL,IAAUG,GAAV,EAAe;AACXD,OAAG,CAAC3E,IAAJ,CAASyE,CAAT;AACH;;AACD,SAAOE,GAAP;AACD;;AAAA,C;;;;;;;;;;;;AC9DD;AAAA;AAAA;AAEA,IAAME,IAAI,GAAG,OAAb;AACA,IAAMf,KAAK,GAAGe,IAAI,CAAC3I,IAAL,CAAU6F,QAAQ,CAAC+C,GAAnB,CAAd;;AAEA,IAAGhB,KAAH,EAAS;AACPpG,kEAAO;AACR,C","file":"content_scripts.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import { loadOn } from \"./helpers\";\nimport { loadOff } from \"./helpers\";\nimport { getCookie } from \"./helpers\";\nimport { localStorageSetItem } from \"./helpers\";\nimport { localStorageGetItem } from \"./helpers\";\nimport { showPopup } from \"./helpers\";\nimport { hidePopup } from \"./helpers\";\n\nfunction listItemTmp (item) {\n  return `<div class=\"js-list-item\">${item}</div>`;\n}\n\nexport default function() {\n  const cookie_name = \"tools_auth_token_\";\n  const ch_id_name = \"tools_channel_id\";\n  let channelId = \"\";\n  let topPlVideos = [];\n  let clearVideoCount = 0;\n  let doneVideoCount = 0;\n  const templates = {\n    IDS: [],\n    MESSAGES: [],\n    TEASERS: []\n  }\n\n  checkUser();\n\n  function checkUser() {\n\n    loadOn();\n\n    chrome.runtime.sendMessage({ action: \"get_id\" }, response => {\n      getChannelId(response);\n    });\n\n    getTemplates();\n  }\n\n  function getChannelId(response) {\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(response, \"text/html\");\n    var elArr = Array.prototype.slice.call(doc.getElementsByTagName(\"script\"));\n    var sText = elArr.filter(function(el) {\n      return el.textContent.indexOf(\"GUIDED_HELP\") > -1;\n    });\n\n    if (sText[0].textContent.indexOf('creator_channel_id\",\"value\":\"') > -1) {\n      channelId = /creator_channel_id\",\"value\":\"([^\"]+)\"/.exec(\n        sText[0].textContent\n      )[1];\n    } else {\n      sText = elArr.filter(function(el) {\n        return el.textContent.indexOf(\"GAPI_HINT_PARAMS\") > -1;\n      });\n      channelId = /creator_channel_id\":\"([^\"]+)\"/.exec(sText[0].textContent)[1];\n    }\n\n    getChannelTitle(channelId);\n\n    checkAuthState(elArr, channelId);\n  }\n\n  function getChannelTitle(channelId) {\n    chrome.runtime.sendMessage(\n      { action: \"get_title\", id: channelId },\n      response => {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(response, \"text/html\");\n        var title = \"\";\n\n        if (doc.getElementsByTagName(\"title\")[1]) {\n          title = doc.getElementsByTagName(\"title\")[1].text;\n        } else {\n          title = doc.getElementsByTagName(\"title\")[0].text;\n        }\n\n        $(\".channel-title\").html(title);\n      }\n    );\n  }\n\n  function checkAuthState(scripts, channelId) {\n    var tagText = scripts.filter(function(el) {\n      return el.textContent.indexOf(\"GAPI_HINT_PARAMS\") > -1;\n    });\n\n    if (typeof tagText[0] === \"undefined\") {\n      alert(\"Auth token error!\");\n      loadOff();\n      return false;\n    }\n\n    var auth_token = \"\";\n    if (tagText[0].textContent.indexOf('\"XSRF_TOKEN\"') > -1) {\n      auth_token = /XSRF_TOKEN\":\"([^\"]+)\"/.exec(tagText[0].textContent)[1];\n    } else {\n      tagText = scripts.filter(function(el) {\n        return el.textContent.indexOf(\"GOOGLE_HELP_CONTEXT\") > -1;\n      });\n      auth_token = /XSRF_TOKEN': \"([^\"]+)\"/.exec(tagText[0].textContent)[1];\n    }\n\n    setCookie(channelId, auth_token);\n\n    getTopPlVideos();\n\n    checkChannelId(channelId);\n  }\n\n  function getTopPlVideos() {\n    chrome.runtime.sendMessage(\n      { action: \"get_pl_videos\", id: channelId },\n      response => {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(response, \"text/html\");\n        var elArr = Array.prototype.slice.call(\n          doc.getElementsByTagName(\"script\")\n        );\n        var sText = elArr.filter(function(el) {\n          return el.textContent.indexOf(\"responseContext\") > -1;\n        });\n\n        var ytData = sText[0].textContent\n          .split('window[\"ytInitialData\"] = ')[1]\n          .split(\";\");\n        topPlVideos = JSON.parse(ytData[0]).contents\n          .twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content\n          .sectionListRenderer.contents[0].itemSectionRenderer.contents[0]\n          .playlistVideoListRenderer.contents;\n\n        clearVideoCount = topPlVideos.length;\n\n        topPlVideos.forEach(item => {\n          let video = item.playlistVideoRenderer;\n\n          if (video.lengthSeconds) {\n            chrome.runtime.sendMessage(\n              { action: \"check_card\", v: video.videoId },\n              response => {\n                item[\"cards\"] = [];\n\n                if (\n                  response.feature_templates.length &&\n                  response.feature_templates[0].key\n                ) {\n                  item[\"has_card\"] = true;\n                  item[\"cards\"] = response.feature_templates;\n                  doneVideoCount++;\n                  clearVideoCount--;\n                }\n\n                loadOff();\n\n                $(\".js-videos-count\").removeClass(\"hide\");\n                $(\".js-all-count\").text(clearVideoCount);\n                $(\".js-done-count\").text(doneVideoCount);\n              }\n            );\n          }\n        });\n      }\n    );\n  }\n\n  function setCard(videoData, video, clearResolve) {\n    return new Promise(setResolve => {\n      let params = {\n        key: \"\",\n        type: \"video\",\n        start_ms: 30000,\n        show_warnings: true,\n        video_item_id: \"\",\n        video_url: \"\",\n        custom_message: \"\",\n        teaser_text: \"\",\n        session_token: getCookie(cookie_name + channelId)\n      };\n\n      let lengthStep = 120 * 1000;\n\n      if (videoData.lengthSeconds < 600) {\n        lengthStep = Math.round((videoData.lengthSeconds / 6) * 1000);\n        params.start_ms = lengthStep;\n      }\n\n      const links = [];\n      const messages = [];\n      const teasers = [];\n\n      $(\".video_item_id\").each((idx, item) => {\n        if (item.value) {\n          links.push(item.value);\n        }\n      });\n\n      $(\".custom_message\").each((idx, item) => {\n        messages.push(item.value ? item.value : '');\n      });\n      \n      $(\".teaser_text\").each((idx, item) => {\n        teasers.push(item.value ? item.value : '');\n      });\n\n      const setCardRequest = (cardVideoId, idx) => {\n        if (cardVideoId.substr(0,2) === 'UC') {\n          delete params.action_create_video;\n          params['action_create_collaborator'] = 1;\n          params['channel_url'] = cardVideoId;\n          params['type'] = 'collaborator';\n        }else {\n          delete params.channel_url;\n          delete params.action_create_collaborator;\n          params['action_create_video'] = 1;\n          params['type'] = 'video';\n        }\n        \n        params.video_item_id = cardVideoId;\n        params.custom_message = messages[idx];\n        params.teaser_text = teasers[idx];\n\n        if (idx > 0) {\n          params.start_ms += lengthStep;\n        }\n\n        $('.cat-loader').addClass('_show');\n\n        return new Promise((resolve, reject) => {\n          chrome.runtime.sendMessage(\n            { action: \"set_card\", v: videoData.videoId, params: params },\n            response => {\n              localStorageSetItem('IDS', params.video_item_id);\n              localStorageSetItem('MESSAGES', params.custom_message);\n              localStorageSetItem('TEASERS', params.teaser_text);\n\n              resolve();\n\n              if(response.error){\n                reject();\n              }\n\n              if (idx === links.length - 1) {\n                let templates = response\n                  .split('response\">')[1]\n                  .split(\"</textarea>\")[0];\n\n                video[\"cards\"] = JSON.parse(templates).feature_templates;\n                clearVideoCount--;\n                doneVideoCount++;\n                video[\"has_card\"] = true;\n\n                $(\".js-all-count\").text(clearVideoCount);\n                $(\".js-done-count\").text(doneVideoCount);\n\n                getTemplates();\n                \n                setTimeout(() => {\n                  $('.cat-loader').removeClass('_show');\n\n                  clearResolve ? clearResolve() : setResolve();\n                },1000);\n              }\n            }\n          );\n        });\n      };\n\n      links.reduce((previousPromise, cardVideoId, idx) => {\n        return previousPromise.then(() => {\n          return setCardRequest(cardVideoId, idx);\n        });\n      }, Promise.resolve());\n    });\n  }\n\n  function clearCard(options) {\n    const {videoData, video, set} = options;\n    return new Promise(mainResolve => {\n      const setCardRequest = (item, idx) => {\n        let params = {\n          key: item.key,\n          type: item.type,\n          start_ms: item.start_ms,\n          show_warnings: true,\n          video_item_id: item.video_id,\n          video_url: \"\",\n          channel_url: item.channel_url,\n          custom_message: item.custom_message,\n          teaser_text: item.teaser_text,\n          session_token: getCookie(cookie_name + channelId)\n        };\n\n        return new Promise(resolve => {\n          $('.cat-loader').addClass('_show');\n\n          chrome.runtime.sendMessage(\n            { action: \"clear_card\", v: videoData.videoId, params: params },\n            () => {\n              resolve();\n\n              if (idx === video.cards.length - 1) {\n                delete video[\"has_card\"];\n\n                clearVideoCount++;\n                doneVideoCount--;\n\n                $(\".js-all-count\").text(clearVideoCount);\n                $(\".js-done-count\").text(doneVideoCount);\n\n                $('.cat-loader').removeClass('_show');\n                \n                set ? setCard(videoData, video, mainResolve) : mainResolve();\n              }\n            }\n          );\n        });\n      };\n\n      video.cards.reduce((previousPromise, item, idx) => {\n        return previousPromise.then(() => {\n          return setCardRequest(item, idx);\n        });\n      }, Promise.resolve());\n    });\n  }\n\n  function checkChannelId(channelId) {\n    if (localStorage.getItem(ch_id_name) != channelId) {\n      localStorage.setItem(ch_id_name, channelId);\n    } else {\n      localStorage.setItem(ch_id_name, channelId);\n    }\n  }\n\n  function setCookie(channelId, auth_token) {\n    var now = new Date();\n    var time = now.getTime();\n    var expireTime = time + 1000 * 3300;\n    now.setTime(expireTime);\n    document.cookie =\n      cookie_name +\n      channelId +\n      \"=\" +\n      auth_token +\n      \"; path=/; expires=\" +\n      now.toGMTString();\n  }\n\n  function getTemplates() {\n    templates.IDS = localStorageGetItem('IDS') || [];\n    templates.MESSAGES = localStorageGetItem('MESSAGES') || [];\n    templates.TEASERS = localStorageGetItem('TEASERS') || [];\n\n    $('.list-content').html('');\n\n    templates.IDS.forEach((item) => {\n      $('.ids-list').append(listItemTmp(item));\n    });\n\n    templates.MESSAGES.forEach((item) => {\n      $('.messages-list').append(listItemTmp(item));\n    });\n\n    templates.TEASERS.forEach((item) => {\n      $('.teasers-list').append(listItemTmp(item));\n    });\n  }\n\n  // SET CARDS\n  $(\".js-set-card-btn\").on(\"click\", e => {\n    e.preventDefault();\n\n    const links = [];\n\n    $(\".video_item_id\").each((idx, item) => {\n      if (item.value) {\n        links.push(item.value);\n      }\n    });\n\n    if (!links.length) return;\n\n    topPlVideos.reduce((previousPromise, item) => {\n      return previousPromise.then(() => {\n        if (item.has_card) {\n          return clearCard({videoData: item.playlistVideoRenderer, video: item, set: true});\n        }\n\n        return setCard(item.playlistVideoRenderer, item);\n      });\n    }, Promise.resolve());\n  });\n\n  // CLEAR CARDS\n  $(\".js-clear-card-btn\").on(\"click\", e => {\n    e.preventDefault();\n\n    topPlVideos.reduce((previousPromise, item) => {\n      if (!item.has_card) {\n        return Promise.resolve();\n      }\n\n      return previousPromise.then(() => {\n        return clearCard({videoData: item.playlistVideoRenderer, video: item, set: false});\n      });\n    }, Promise.resolve());\n  });\n\n\n  $('.list-ico').on('click', (e) => {\n    const type = e.currentTarget.dataset.type;\n    const btn = $(e.currentTarget);\n\n    \n    btn.toggleClass('open');\n    \n    if (templates[type].length) {\n      if (btn.hasClass('open')) {\n        $('.list-block').closest('div').removeClass('focus');\n        btn.closest('div').addClass('focus');\n      }else {\n        $('.list-ico').removeClass('open');\n        btn.closest('div').removeClass('focus');\n      }\n      // $(e.currentTarget).closest('div').toggleClass('focus');\n    }\n  });\n\n  // HIDE LIST ON ESC PRESS\n  $('body').keydown((e) => {\n    if (e.which === 27) {\n      $('.list-ico').removeClass('open');\n      $('.list-block').removeClass('focus');\n    }\n  })\n\n  // SET LIST ITEM VALUE TO INPUT\n  $('body').on('click','.js-list-item', (e) => {\n    const value = e.currentTarget.innerHTML;\n\n    $(e.currentTarget).parent().siblings('input').val(value).trigger(\"change\");\n    \n    $('.list-block').removeClass('focus');\n    $('.list-ico').removeClass('open');\n  });\n\n  $('.video_item_id').on('change', (e) => {\n    const item = $(e.currentTarget);\n    const id = item.data('id');\n    const teaser = $(`input.teaser_text[data-id=\"${id}\"]`);\n    const message = $(`input.custom_message[data-id=\"${id}\"]`);\n    const val = item.val();\n\n    if (val.substr(0,2) === 'UC') {\n      if (!teaser.val()) {\n        teaser.addClass('b-input-error');\n      }\n\n      if (!message.val()) {\n        message.addClass('b-input-error');\n      }\n    }else{\n      teaser.removeClass('b-input-error');\n      message.removeClass('b-input-error');\n    }\n  });\n\n  $('.custom_message,.teaser_text').on('change input', (e) => {\n    const item = $(e.currentTarget);\n    const id = item.data('id');\n    const video = $(`input.video_item_id[data-id=\"${id}\"]`);\n\n    if (video.val().substr(0,2) === 'UC') {\n      if (item.val()) {\n        item.removeClass('b-input-error');\n      }else {\n        item.addClass('b-input-error');\n      }\n    }\n  });\n}\n","export function loadOn() {\n  $(\".b-loader\").show();\n}\n\nexport function showPopup(text) {\n  $(\".b-popup\").addClass(\"_show\");\n  $(\".b-popup-box\").html(text);\n  setTimeout(() => {\n    hidePopup();\n  }, 1500);\n}\n\nexport function hidePopup() {\n  $(\".b-popup\").removeClass(\"_show\");\n}\n\nexport function loadOff() {\n  $(\".b-loader\").hide();\n}\n\nexport function getCookie(name) {\n  var matches = document.cookie.match(\n    new RegExp(\n      \"(?:^|; )\" +\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\n        \"=([^;]*)\"\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function localStorageSetItem(key, value) {\n  if (!value) return;\n  \n  let oldArray = localStorageGetItem(key);\n  \n  if (!oldArray) {\n    oldArray = [];\n  }\n\n  const newArray = unique(oldArray.concat(value));\n\n  localStorage.setItem(key, JSON.stringify(newArray));\n}\n\nexport function localStorageGetItem(key) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\nfunction unique(arr) {\n  var i,\n      len = arr.length,\n      out = [],\n      obj = { };\n  \n  for (i = 0; i < len; i++) {\n      obj[arr[i]] = 0;\n  }\n  for (i in obj) {\n      out.push(i);\n  }\n  return out;\n};","import content from './content_scripts';\n\nconst page = /tools/;\nconst match = page.exec(document.URL);\n\nif(match){\n  content();\n}"],"sourceRoot":""}