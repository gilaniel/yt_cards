{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/content_scripts.js","webpack:///./src/helpers.js","webpack:///./src/index.js"],"names":["listItemTmp","item","cookie_name","ch_id_name","channelId","topPlVideos","ytVideos","cardsTemplates","clearVideoCount","doneVideoCount","templates","IDS","MESSAGES","TEASERS","checkUser","loadOn","$","append","chrome","runtime","sendMessage","action","response","getChannelId","getTemplates","parser","DOMParser","doc","parseFromString","elArr","Array","prototype","slice","call","getElementsByTagName","sText","filter","el","textContent","indexOf","split","JSON","parse","serviceParams","responseContext","serviceTrackingParams","forEach","service","ytId","params","value","checkAuthState","Error","e","console","log","exec","find","attr","getChannelTitle","id","title","text","html","getNewVideos","scripts","tagText","alert","loadOff","auth_token","setCookie","localStorage","setItem","get","then","payload","promiseArr","data","videos","length","video","playlistVideoRenderer","videoId","lengthSeconds","push","checkVideoCard","Promise","all","results","concat","getTopPlVideos","plId","ytData","contents","twoColumnBrowseResultsRenderer","tabs","tabRenderer","content","sectionListRenderer","itemSectionRenderer","playlistVideoListRenderer","videoPromise","resolve","reject","v","feature_templates","key","removeClass","setCard","idx","array","lastError","localStorageSetItem","video_item_id","custom_message","teaser_text","error","allVideos","clearCard","options","videoData","set","mainResolve","setCardRequest","session_token","getCookie","cards","reduce","previousPromise","copyCards","fillCards","each","video_id","playlist_id","channel_url","val","now","Date","time","getTime","expireTime","setTime","document","cookie","toGMTString","localStorageGetItem","on","preventDefault","links","sendArray","i","messages","teasers","type","start_ms","show_warnings","video_url","lengthStep","Math","round","action_create_video","action_create_collaborator","size","subarray","ceil","subItem","has_card","currentTarget","dataset","btn","toggleClass","hasClass","closest","addClass","show","showPopup","setTimeout","hidePopup","hide","name","matches","match","RegExp","replace","decodeURIComponent","undefined","oldArray","newArray","unique","stringify","getItem","arr","len","out","obj","page","URL"],"mappings":"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","file":"content_scripts.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import { loadOn } from \"./helpers\";\nimport { loadOff } from \"./helpers\";\nimport { getCookie } from \"./helpers\";\nimport { localStorageSetItem } from \"./helpers\";\nimport { localStorageGetItem } from \"./helpers\";\nimport { showPopup } from \"./helpers\";\nimport { hidePopup } from \"./helpers\";\n\nfunction listItemTmp (item) {\n  return `<div class=\"js-list-item\">${item}</div>`;\n}\n\nexport default function() {\n  const cookie_name = \"tools_auth_token_\";\n  const ch_id_name = \"tools_channel_id\";\n  let channelId = \"\";\n  let topPlVideos = [];\n  let ytVideos = [];\n  let cardsTemplates = [];\n  let clearVideoCount = 0;\n  let doneVideoCount = 0;\n  const templates = {\n    IDS: [],\n    MESSAGES: [],\n    TEASERS: []\n  }\n\n  checkUser();\n\n\n  function checkUser() {\n\n    loadOn();\n\n    $('body').append('<script id=\"initApp\"></script>')\n\n    chrome.runtime.sendMessage({ action: \"get_id\" }, response => {\n      getChannelId(response);\n    });\n\n    getTemplates();\n  }\n\n  function getChannelId(response) {\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(response, \"text/html\");\n    var elArr = Array.prototype.slice.call(doc.getElementsByTagName(\"script\"));\n    var sText = elArr.filter(function(el) {\n      return el.textContent.indexOf(\"GUIDED_HELP\") > -1;\n    });\n\n    try {\n\t\t\tsText = sText[0].textContent.split('var ytInitialGuideData = JSON.parse(')[1].split(');')[0];\n\t\t\tsText = JSON.parse(sText);\n\t\t\tsText = JSON.parse(sText);\n\n\t\t\tvar serviceParams = sText.responseContext.serviceTrackingParams;\n\n\t\t\tserviceParams.forEach(function(item) {\n\t\t\t\tif (item.service === 'GUIDED_HELP') {\n\t\t\t\t\tytId = item.params[0].value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (ytId) {\n\t\t\t\tcheckAuthState(elArr,channelId);\n\n\t\t\t\treturn;\n\t\t\t} else{\n\t\t\t\tthrow new Error('no channel ID');\n\t\t\t}\n\n\t\t} catch(e) {\n\t\t\tconsole.log(e)\n    }\n    \n    sText = elArr.filter(function(el){return el.textContent.indexOf(\"GUIDED_HELP\") > -1;});\n\n\n    if (sText[0].textContent.indexOf('creator_channel_id\",\"value\":\"') > -1) {\n      channelId = /creator_channel_id\",\"value\":\"([^\"]+)\"/.exec(\n        sText[0].textContent\n      )[1];\n    } else {\n      channelId = $(doc).find('.spf-link[title=\"Мой канал\"]').attr('href') || $(doc).find('.spf-link[title=\"My channel\"]').attr('href');\n\t\t\tchannelId = channelId.split('/channel/')[1];\n      // sText = elArr.filter(function(el) {\n      //   return el.textContent.indexOf(\"GAPI_HINT_PARAMS\") > -1;\n      // });\n      // channelId = /creator_channel_id\":\"([^\"]+)\"/.exec(sText[0].textContent)[1];\n    }\n\n    checkAuthState(elArr, channelId);\n  }\n\n  function getChannelTitle(channelId) {\n    chrome.runtime.sendMessage(\n      { action: \"get_title\", id: channelId },\n      response => {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(response, \"text/html\");\n        var title = \"\";\n\n        if (doc.getElementsByTagName(\"title\")[1]) {\n          title = doc.getElementsByTagName(\"title\")[1].text;\n        } else {\n          title = doc.getElementsByTagName(\"title\")[0].text;\n        }\n\n        $(\".channel-title\").html(title);\n\n        getNewVideos();\n\n        // loadOff();\n      }\n    );\n  }\n\n  function checkAuthState(scripts, channelId) {\n    var tagText = scripts.filter(function(el) {\n      return el.textContent.indexOf(\"GAPI_HINT_PARAMS\") > -1;\n    });\n\n    if (typeof tagText[0] === \"undefined\") {\n      alert(\"Auth token error!\");\n      loadOff();\n      return false;\n    }\n\n    var auth_token = \"\";\n    if (tagText[0].textContent.indexOf('\"XSRF_TOKEN\"') > -1) {\n      auth_token = /XSRF_TOKEN\":\"([^\"]+)\"/.exec(tagText[0].textContent)[1];\n    } else {\n      tagText = scripts.filter(function(el) {\n        return el.textContent.indexOf(\"GOOGLE_HELP_CONTEXT\") > -1;\n      });\n      auth_token = /XSRF_TOKEN': \"([^\"]+)\"/.exec(tagText[0].textContent)[1];\n    }\n\n    setCookie(channelId, auth_token);\n\n    // getNewVideos();\n\n    getChannelTitle(channelId);\n\n    localStorage.setItem(ch_id_name, channelId);\n  }\n\n  function getNewVideos() {\n    $.get('/admin/cards?channel_id=' + channelId).then(function(payload) {\n      const promiseArr = [];\n\n      clearVideoCount += payload.data.videos.length;\n\n      payload.data.videos.forEach(item => {\n        let video = {\n          playlistVideoRenderer: {\n            videoId: item[0],\n            lengthSeconds: item[1]\n          }\n        };\n\n        ytVideos.push(video);\n\n        checkVideoCard(item[0], video, promiseArr);         \n      });\n\n      Promise.all(promiseArr).then((results)=>{\n        loadOff();\n        $(\".js-all-count\").text(ytVideos.concat(topPlVideos).length);\n      });\n    });\n  }\n\n  function getTopPlVideos(plId) {\n    loadOn();\n\n    chrome.runtime.sendMessage(\n      { action: \"get_pl_videos\", plId: plId },\n      response => {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(response, \"text/html\");\n        var elArr = Array.prototype.slice.call(\n          doc.getElementsByTagName(\"script\")\n        );\n        var sText = elArr.filter(function(el) {\n          return el.textContent.indexOf(\"responseContext\") > -1;\n        });\n\n        var ytData = sText[0].textContent\n          .split('window[\"ytInitialData\"] = ')[1]\n          .split(\";\");\n        topPlVideos = JSON.parse(ytData[0]).contents\n          .twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content\n          .sectionListRenderer.contents[0].itemSectionRenderer.contents[0]\n          .playlistVideoListRenderer.contents;\n\n        clearVideoCount = topPlVideos.length;\n\n        const promiseArr = [];\n\n        topPlVideos.forEach(item => {\n          let video = item.playlistVideoRenderer;\n\n          if (video.lengthSeconds) {\n            checkVideoCard(video.videoId, item, promiseArr);         \n          } else{\n            clearVideoCount--;\n          }\n        });\n\n        Promise.all(promiseArr).then((results)=>{\n          loadOff();\n\n          $(\".js-all-count\").text(ytVideos.concat(topPlVideos).length);\n        });\n      }\n    );\n  }\n\n  function checkVideoCard(videoId, item, promiseArr) {\n    let videoPromise = new Promise((resolve, reject) =>{\n      chrome.runtime.sendMessage(\n        { action: \"check_card\", v: videoId },\n        response => {\n          item[\"cards\"] = [];\n\n          if (\n            response.feature_templates.length &&\n            response.feature_templates[0].key\n          ) {\n            item[\"has_card\"] = true;\n            item[\"cards\"] = response.feature_templates;\n          }\n\n\n          $(\".js-videos-count\").removeClass(\"hide\");\n\n          resolve(item);\n        }\n      );\n    });\n\n    promiseArr.push(videoPromise);\n  }\n\n  function setCard(videos) {\n    return new Promise((resolve, reject) => {\n\n      videos.forEach((item, idx, array) => {\n        chrome.runtime.sendMessage(\n          { action: \"set_card\", v: item.video.playlistVideoRenderer.videoId, params: item.params },\n          (response) => {\n            const lastError = chrome.runtime.lastError;\n  \n            localStorageSetItem('IDS', item.params.video_item_id);\n            localStorageSetItem('MESSAGES', item.params.custom_message);\n            localStorageSetItem('TEASERS', item.params.teaser_text);\n  \n            if (lastError || response.error) {\n              console.log(response);\n              reject();\n              \n              return;\n            }\n  \n            const allVideos = ytVideos.concat(topPlVideos);\n            \n            if (idx === array.length -1) {\n              console.log('done');\n              resolve();\n            }\n            \n            // if (idx === links.length - 1) {\n            //   doneVideoCount ++;\n  \n            //   $('.progress-bar-fill').css('width',100 * (doneVideoCount) / allVideos.length + '%');\n              \n            //   let templates = response\n            //     .split('response\">')[1]\n            //     .split(\"</textarea>\")[0];\n  \n            //   video[\"cards\"] = JSON.parse(templates).feature_templates;\n            //   video[\"has_card\"] = true;\n  \n            //   getTemplates();\n              \n            // }\n          }\n        );\n      });\n    });\n\n    promiseArr.push(videoPromise);\n  }\n\n  function clearCard(options) {\n    const {videoData, video, set} = options;\n    return new Promise(mainResolve => {\n      const setCardRequest = (item, idx) => {\n        let params = {\n          key: item.key,\n          // type: item.type,\n          // start_ms: item.start_ms,\n          // show_warnings: true,\n          // video_item_id: item.video_id,\n          // video_url: \"\",\n          // channel_url: item.channel_url,\n          // custom_message: item.custom_message,\n          // teaser_text: item.teaser_text,\n          session_token: getCookie(cookie_name + channelId)\n        };\n\n        return new Promise(resolve => {\n          chrome.runtime.sendMessage(\n            { action: \"clear_card\", v: videoData.videoId, params: params },\n            () => {\n              resolve();\n\n              if (idx === video.cards.length - 1) {\n                delete video[\"has_card\"];\n\n                set ? setCard(videoData, video, mainResolve) : mainResolve();\n              }\n            }\n          );\n        });\n      };\n\n      video.cards.reduce((previousPromise, item, idx) => {\n        return previousPromise.then(() => {\n          return setCardRequest(item, idx);\n        });\n      }, Promise.resolve());\n    });\n  }\n\n  function copyCards(videoId) {\n    loadOn();\n\n    chrome.runtime.sendMessage(\n      { action: \"check_card\", v: videoId },\n      (response) => {\n        if (\n          response.feature_templates.length &&\n          response.feature_templates[0].key\n        ) {\n          cardsTemplates = response.feature_templates;\n\n          fillCards();\n\n          loadOff();\n        }\n      });\n  }\n\n  function fillCards() {\n    $('.card-block').each((idx,item) => {\n      if (!cardsTemplates[idx]) return;\n\n      let id = cardsTemplates[idx].video_id || cardsTemplates[idx].playlist_id || cardsTemplates[idx].channel_url;\n      let custom_message = cardsTemplates[idx].custom_message ;\n      let teaser_text = cardsTemplates[idx].teaser_text ;\n      \n      item = $(item);\n\n      item.find('.video_item_id').val(id);\n      item.find('.custom_message').val(custom_message);\n      item.find('.teaser_text').val(teaser_text);\n    });\n  }\n\n  function setCookie(channelId, auth_token) {\n    var now = new Date();\n    var time = now.getTime();\n    var expireTime = time + 1000 * 3300;\n    now.setTime(expireTime);\n    document.cookie =\n      cookie_name +\n      channelId +\n      \"=\" +\n      auth_token +\n      \"; path=/; expires=\" +\n      now.toGMTString();\n  }\n\n  function getTemplates() {\n    templates.IDS = localStorageGetItem('IDS') || [];\n    templates.MESSAGES = localStorageGetItem('MESSAGES') || [];\n    templates.TEASERS = localStorageGetItem('TEASERS') || [];\n\n    $('.list-content').html('');\n\n    templates.IDS.forEach((item) => {\n      $('.ids-list').append(listItemTmp(item));\n    });\n\n    templates.MESSAGES.forEach((item) => {\n      $('.messages-list').append(listItemTmp(item));\n    });\n\n    templates.TEASERS.forEach((item) => {\n      $('.teasers-list').append(listItemTmp(item));\n    });\n  }\n\n  // SET CARDS\n  $(\".js-set-card-btn\").on(\"click\", e => {\n    e.preventDefault();\n\n    const links = [];\n\n    $(\".video_item_id\").each((idx, item) => {\n      if (item.value) {\n        links.push(item.value);\n      }\n    });\n\n    if (!links.length) return;\n\n    doneVideoCount = 0;\n\n    const sendArray = [];\n\n    for (let i = 0; i < links.length; i++) {\n      topPlVideos.concat(ytVideos.slice(0,5)).forEach((item,idx) => {\n        const messages = [];\n        const teasers = [];\n  \n        $(\".custom_message\").each((idx, item) => {\n          messages.push(item.value ? item.value : '');\n        });\n        \n        $(\".teaser_text\").each((idx, item) => {\n          teasers.push(item.value ? item.value : '');\n        });\n\n        let videoData = item.playlistVideoRenderer;\n\n        let params = {\n          key: \"\",\n          type: \"video\",\n          start_ms: 30000,\n          show_warnings: true,\n          video_item_id: \"\",\n          video_url: \"\",\n          custom_message: \"\",\n          teaser_text: \"\",\n          session_token: getCookie(cookie_name + channelId)\n        };\n  \n        let lengthStep = 120 * 1000;\n  \n        if (videoData.lengthSeconds < 600) {\n          lengthStep = Math.round((videoData.lengthSeconds / 6) * 1000);\n          params.start_ms = lengthStep;\n        }\n\n        if (links[i].indexOf('youtube') > -1) {\n          delete params.action_create_video;\n          params['action_create_collaborator'] = 1;\n          params['channel_url'] = links[i];\n          params['type'] = 'collaborator';\n        }else {\n          delete params.channel_url;\n          delete params.action_create_collaborator;\n          params['action_create_video'] = 1;\n          params['type'] = 'video';\n        }\n        \n        params.video_item_id = links[i];\n        params.custom_message = messages[i];\n        params.teaser_text = teasers[i];\n\n        if (i > 0) {\n          params.start_ms += lengthStep;\n        }\n\n        sendArray.push({video: item, params: params});\n      });\n    }\n\n    let size = 10;\n    let subarray = [];\n    \n    for (let i = 0; i <Math.ceil(sendArray.length/size); i++){\n        subarray[i] = sendArray.slice((i*size), (i*size) + size);\n    }\n    \n    subarray.reduce((previousPromise, subItem) => {\n      return previousPromise.then(() => {\n        return setCard(subItem);\n      }).catch(() => {\n        console.log('error');\n      });\n    }, Promise.resolve());\n    \n    return; \n\n    topPlVideos.concat(ytVideos.slice(0,5)).reduce((previousPromise, item) => {\n      return previousPromise.then(() => {\n        if (item.has_card) {\n          return clearCard({videoData: item.playlistVideoRenderer, video: item, set: true});\n        }\n\n        return setCard(item.playlistVideoRenderer, item);\n      });\n    }, Promise.resolve());\n  });\n\n  // CLEAR CARDS\n  $(\".js-clear-card-btn\").on(\"click\", e => {\n    e.preventDefault();\n\n    topPlVideos.concat(ytVideos).reduce((previousPromise, item) => {\n      if (!item.has_card) {\n        return Promise.resolve();\n      }\n\n      return previousPromise.then(() => {\n        return clearCard({videoData: item.playlistVideoRenderer, video: item, set: false});\n      });\n    }, Promise.resolve());\n  });\n\n\n  $('.list-ico').on('click', (e) => {\n    const type = e.currentTarget.dataset.type;\n    const btn = $(e.currentTarget);\n\n    \n    btn.toggleClass('open');\n    \n    if (templates[type].length) {\n      if (btn.hasClass('open')) {\n        $('.list-block').closest('div').removeClass('focus');\n        btn.closest('div').addClass('focus');\n      }else {\n        $('.list-ico').removeClass('open');\n        btn.closest('div').removeClass('focus');\n      }\n      // $(e.currentTarget).closest('div').toggleClass('focus');\n    }\n  });\n\n  $('.js-get-list').on('click', () => {\n    var plId = $('.js-pl-id').val();\n    if (!plId) return;\n\n    getTopPlVideos(plId);\n  });\n\n  $('.js-copy-cards').on('click', () => {\n    var videoId = $('.js-video-id').val();\n\n    if (!videoId) return;\n\n    copyCards(videoId);\n  });\n}\n","export function loadOn() {\n  $(\".b-loader\").show();\n}\n\nexport function showPopup(text) {\n  $(\".b-popup\").addClass(\"_show\");\n  $(\".b-popup-box\").html(text);\n  setTimeout(() => {\n    hidePopup();\n  }, 1500);\n}\n\nexport function hidePopup() {\n  $(\".b-popup\").removeClass(\"_show\");\n}\n\nexport function loadOff() {\n  $(\".b-loader\").hide();\n}\n\nexport function getCookie(name) {\n  var matches = document.cookie.match(\n    new RegExp(\n      \"(?:^|; )\" +\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\n        \"=([^;]*)\"\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function localStorageSetItem(key, value) {\n  if (!value) return;\n  \n  let oldArray = localStorageGetItem(key);\n  \n  if (!oldArray) {\n    oldArray = [];\n  }\n\n  const newArray = unique(oldArray.concat(value));\n\n  localStorage.setItem(key, JSON.stringify(newArray));\n}\n\nexport function localStorageGetItem(key) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\nfunction unique(arr) {\n  var i,\n      len = arr.length,\n      out = [],\n      obj = { };\n  \n  for (i = 0; i < len; i++) {\n      obj[arr[i]] = 0;\n  }\n  for (i in obj) {\n      out.push(i);\n  }\n  return out;\n};","import content from './content_scripts';\n\nconst page = /cards/;\nconst match = page.exec(document.URL);\n\nif(match){\n  content();\n}"],"sourceRoot":""}